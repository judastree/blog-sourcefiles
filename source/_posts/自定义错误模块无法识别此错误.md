title: "自定义错误模块无法识别此错误"
date: 2015-12-13 19:00:22
tags: [故障排查]
---

##问题描述

前两天生产上发现某地区的部分用户手机扫码打开页面出现【自定义错误模块无法识别此错误】。

##排查过程

1.前端代码中并没有过这样的处理，所以就先查服务接口是否有这样的报错。

2.但发现服务接口并没有异常，于是去看页面请求的日志，发现当前页面出现了大量的429错。

3.http 的 429 错误码是Too Many Request.因为请求太多服务器拒绝了该IP的访问。查了下被拒绝的IP，刚好地区与故障用户的地区一致。

4.问题基本就是这个了，服务器返回了429的错误码，不像404，502这些常见的，用户的手机浏览器一般都没有去处理这个错误码，于是返回的【自定义错误模块无法识别此错误】

5.和业务反映原因，可能是手机连的wifi，出口ip一致，请求过多导致服务器拒绝，建议用户扫码时用移动网络。

6.业务反馈说，用户确实用的是移动网络啊。

7. = =！继续查，发现曾经那个地方有爬虫访问公司网络，那个移动基站的IP被封了20几个。


